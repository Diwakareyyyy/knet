{% extends "layout.html" %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">Ask for Help</h2>
<form method="POST" class="bg-white p-6 rounded-2xl shadow max-w-2xl space-y-3 mb-8">
  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm mb-1">Your Name</label>
      <input type="text" name="requester_name" placeholder="Optional" class="w-full border rounded p-2">
    </div>
    <div>
      <label class="block text-sm mb-1">Contact</label>
      <input type="text" name="contact" placeholder="Phone / Email" class="w-full border rounded p-2">
    </div>
  </div>
  <div>
    <label class="block text-sm mb-1">Title</label>
    <input type="text" name="title" placeholder="e.g., Need a printout of syllabus" required class="w-full border rounded p-2">
  </div>
  <div>
    <label class="block text-sm mb-1">Description</label>
    <textarea name="description" placeholder="Details..." class="w-full border rounded p-2" rows="4"></textarea>
  </div>
  <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg">Post Help</button>
</form>

<h3 class="text-xl font-bold mb-3">Recent Help Requests</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  {% for p in posts %}
  <div class="bg-white rounded-2xl shadow p-5">
    <h4 class="font-bold text-lg">{{ p['title'] }}</h4>
    <p class="text-slate-700 mt-1">{{ p['description'] }}</p>
    <p class="text-sm text-slate-600 mt-2">By: {{ p['requester_name'] or 'Anonymous' }} | Contact: {{ p['contact'] or 'â€”' }}</p>
    <div class="mt-3">
      <a href="/help/{{ p['id'] }}/chat" class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 rounded-lg text-sm">Open Chat</a>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
